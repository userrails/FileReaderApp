<!DOCTYPE html>
<html>
  <head>
    <title>Map</title>
    <link rel="stylesheet" href="/assets/js/jquery-jvectormap-2.0.3/jquery-jvectormap-2.0.3.css" type="text/css" media="screen"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- <script src="jquery.js"></script> -->
    <script src="/assets/js/jquery-jvectormap-2.0.3/jquery-jvectormap-2.0.3.min.js"></script>
    <script src="/assets/js/jquery-jvectormap-2.0.3/jquery-jvectormap-world-mill.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>

  <body>
    <p><a class="nav-link active" href="/">&larr; Go Home</a> <br /></p>

    <div class="row" id="gallery"></div>


    <!-- Trigger the Modal -->
    <img id="myImg" src="img_snow.jpg" alt="Snow" style="width:100%;max-width:300px">

    <!-- The Modal -->
    <!-- <div id="myModal" class="modal"> -->

      <!-- The Close Button -->
      <!-- <span class="close">&times;</span> -->

      <!-- Modal Content (The Image) -->
      <!-- <img class="modal-content" id="img01"> -->

      <!-- Modal Caption (Image Text) -->
      <!-- <div id="caption"></div> -->
    <!-- </div> -->


    <div id="myModal" class="modal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Modal title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>Modal body text goes here.</p>

            <!-- Modal Content (The Image) -->
            <img class="modal-content img-responsive" id="img01">

            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary">Save changes</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="./assets/js/main.js"></script>
  </body>
</html>

<script type="text/javascript">
  // load all the pictures
  var folder = "/assets/img/";

    $.ajax({
        url : folder,
        success: function (data) {
            $(data).find("a").attr("href", function (i, val) {
                if( val.match(/\.(jpe?g|png|gif)$/) ) { 
                    $("#gallery").append( "<img src='"+ folder + val +"' class='d-block w-100 h-100' id='imagepreview"+ "-" + i +"'>" );
                }
            });
        }
    });

    $(document).ready(function() {
        $('#imagepreview-1').click(function(e) {
          console.log("trigger");
        });
    });

    window.onload = function(){ 
    // your code 
      // Get the modal
      var modal = document.getElementById("myModal");

      // // Get the image and insert it inside the modal - use its "alt" text as a caption
      var img = document.getElementById("imagepreview-1");
      var modalImg = document.getElementById("img01");
      var captionText = document.getElementById("caption");
      console.log("------");
      
      img.onclick = function(){
        modal.style.display = "block";
        modalImg.src = this.src;
        captionText.innerHTML = this.alt;
      }
    };

    // // Get the <span> element that closes the modal
    // var span = document.getElementsByClassName("close")[0];

    // // When the user clicks on <span> (x), close the modal
    // span.onclick = function() { 
    //   modal.style.display = "none";
    // }

    $(function () {
       $("#myModal .close").click()
    });
</script>

<style type="text/css">
  #gallery img {
    width: 390px;
    height: 390px;
  }
</style>